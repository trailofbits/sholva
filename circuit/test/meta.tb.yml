module: meta
file: ../execute/meta.v
inputs:
  - "6 opc"
  - "8 ah_in"
  - "7 status_in"
outputs:
  - "1 ah_wr"
  - "8 ah_out"
  - "7 status_out"
vector_specs:
  - _description: "CLC (clear carry)"
    opc: 10 # CLC
    ah_in: 0xff
    status_in: 0b1111111
    ah_wr: 0
    ah_out: 0xff
    status_out: 0b1101111
  - _description: "STC (set carry)"
    opc: 50 # STC
    ah_in: 0xff
    status_in: 0b0000000
    ah_wr: 0
    ah_out: 0xff
    status_out: 0b0010000
  - _description: "CLD (clear direction)"
    opc: 11 # CLD
    ah_in: 0xff
    status_in: 0b1111111
    ah_wr: 0
    ah_out: 0xff
    status_out: 0b0111111
  - _description: "STD (set direction)"
    opc: 51 # STD
    ah_in: 0xff
    status_in: 0b0000000
    ah_wr: 0
    ah_out: 0xff
    status_out: 0b1000000
  - _description: "SAHF (AH -> EFLAGS), all set"
    opc: 44 # SAHF
    ah_in: 0b11010111 # bit 1 of EFLAGS is always high
    status_in: 0b1000000
    ah_wr: 0
    ah_out: 0b11010111
    status_out: 0b1111111
  - _description: "SAHF (AH -> EFLAGS), all clear"
    opc: 44
    ah_in: 0b00000010
    status_in: 0b1111111
    ah_wr: 0
    ah_out: 0b00000010
    status_out: 0b1000000 # bit 6 of compressed status is DF, not modified
