{ pkgs ? import <nixpkgs> { }
}:
let
  sholva-jdk = pkgs.pkgsi686Linux.jdk11_headless.overrideAttrs (old: rec {
    doCheck = false;
    enableGnome2 = false;
    enableJavaFX = false;
    headless = true;
    NIX_CFLAGS_COMPILE = [ old.NIX_CFLAGS_COMPILE "-Wno-error=format-security " ];
    # per https://openjdk.org/groups/build/doc/building.html:
    # > Also note that, despite what autoconf claims, setting CFLAGS will not accomplish
    # > anything. Instead use --with-extra-cflags (and similar for cxxflags and ldflags).
#    configureFlags = old.configureFlags ++ [
#      "--with-extra-cflags=-msoft-float"
#      "--with-extra-ldflags="
#    ];
  });
in
pkgs.enableDebugging sholva-jdk
