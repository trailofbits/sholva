{ pkgs, stdenv, ... }:
let
  jdk-i386 = pkgs.jdk11_headless.overrideAttrs (old: rec {
    enableGnome2 = false;
    enableJavaFX = false;

    # per https://openjdk.org/groups/build/doc/building.html:
    # > Also note that, despite what autoconf claims, setting CFLAGS will not accomplish
    # > anything. Instead use --with-extra-cflags (and similar for cxxflags and ldflags).
     configureFlags = old.configureFlags ++ [
       "--with-toolchain-type=clang"
#      "--with-target-bits=32"
     ];
  });

  sholva-jdk = jdk-i386.override {
    stdenv = stdenv;
  };
in
pkgs.enableDebugging sholva-jdk
